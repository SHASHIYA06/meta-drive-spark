services:
  - type: web
    name: kmrcl-ai-backend
    plan: free
    env: node
    region: oregon
    rootDirectory: backend
    buildCommand: npm install
    startCommand: node server.js
    envVars:
      # Required - Gemini API for basic functionality
      - key: GEMINI_API_KEY
        sync: false
      - key: FRONTEND_URL
        sync: false
      - key: PORT
        value: 10000
      - key: NODE_ENV
        value: production
      
      # Optional - Only needed for Google Cloud Vertex AI (advanced features)
      # Leave these empty unless you want to use Vertex AI
      - key: GOOGLE_CLOUD_PROJECT
        sync: false
      - key: GOOGLE_APPLICATION_CREDENTIALS_JSON
        sync: false
      - key: VERTEX_AI_LOCATION
        value: us-central1
      
      # Processing configuration
      - key: OCR_LANG
        value: eng
      - key: BATCH_SIZE
        value: 8
      - key: CHUNK_SIZE
        value: 1200
      - key: CHUNK_OVERLAP
        value: 200
      - key: SQLITE_PATH
        value: /opt/render/project/src/vectorstore.sqlite
